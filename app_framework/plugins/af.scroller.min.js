/*
 Intel
*/
(function(d){function p(){if(af.os.android&&!af.os.chrome&&af.os.webkit){var k=!1;d.bind(d.touchLayer,["cancel-enter-edit","exit-edit"],function(d){if(k){k=!1;for(var h in l)l[h].el?d=!0:(delete l[h],d=!1),d&&l[h].androidFormsMode&&l[h].stopFormsMode()}})}n=!0}var l=[];d.fn.scroller=function(k){for(var g,h,e=0;e<this.length;e++)g=this[e],g.afScrollerId||(g.afScrollerId=d.uuid()),h=g.afScrollerId,l[h]?g=l[h]:(k||(k={}),d.feat.nativeTouchScroll||(k.useJsScroll=!0),g=q(this[e],k),l[h]=g);return 1==this.length?
g:this};var n=!1,q=function(){function k(a,b){var c=document.createElement("div");c.style.position="absolute";c.style.width=a+"px";c.style.height=b+"px";c.style[d.feat.cssPrefix+"BorderRadius"]="2px";c.style.borderRadius="2px";c.style.display="none";c.className="scrollBar";c.style.background="black";return c}var g=d.feat.cssTransformStart,h=d.feat.cssTransformEnd,e,f,m=function(a,b){this.el=a;this.afEl=d(this.el);for(var c in b)this[c]=b[c]};m.prototype={refresh:!1,refreshContent:"Pull to Refresh",
refreshHangTimeout:2E3,refreshHeight:60,refreshElement:null,refreshCancelCB:null,refreshRunning:!1,scrollTop:0,scrollLeft:0,preventHideRefresh:!0,verticalScroll:!0,horizontalScroll:!1,refreshTriggered:!1,moved:!1,eventsActive:!1,rememberEventsActive:!1,scrollingLocked:!1,autoEnable:!0,blockFormsFix:!1,loggedPcentY:0,loggedPcentX:0,infinite:!1,infiniteEndCheck:!1,infiniteTriggered:!1,scrollSkip:!1,scrollTopInterval:null,scrollLeftInterval:null,bubbles:!0,lockBounce:!1,_scrollTo:function(a,b){b=parseInt(b,
10);if(0===b||isNaN(b))this.el.scrollTop=Math.abs(a.y),this.el.scrollLeft=Math.abs(a.x);else{var c=(this.el.scrollTop-a.y)/Math.ceil(b/10),d=(this.el.scrollLeft-a.x)/Math.ceil(b/10),e=this,f=Math.ceil(this.el.scrollTop-a.y)/c,h=Math.ceil(this.el.scrollLeft-a.x)/c,g=0,k=0;e.scrollTopInterval=window.setInterval(function(){e.el.scrollTop-=c;k++;k>=f&&(e.el.scrollTop=a.y,clearInterval(e.scrollTopInterval))},10);e.scrollLeftInterval=window.setInterval(function(){e.el.scrollLeft-=d;g++;g>=h&&(e.el.scrollLeft=
a.x,clearInterval(e.scrollLeftInterval))},10)}},enable:function(){},disable:function(){},hideScrollbars:function(){},addPullToRefresh:function(){},_scrollToTop:function(a){this._scrollTo({x:0,y:0},a)},_scrollToBottom:function(a){this._scrollTo({x:0,y:this.el.scrollHeight-this.el.offsetHeight},a)},scrollToBottom:function(a){return this._scrollToBottom(a)},scrollToTop:function(a){return this._scrollToTop(a)},init:function(a,b){this.el=a;this.afEl=d(this.el);this.defaultProperties();for(var c in b)this[c]=
b[c];var e=this,f=function(){e.eventsActive&&e.adjustScroll()};this.afEl.bind("destroy",function(){e.disable(!0);var a=e.el.afScrollerId;l[a]&&delete l[a];d.unbind(d.touchLayer,"orientationchange-reshape",f)});d.bind(d.touchLayer,"orientationchange-reshape",f)},needsFormsFix:function(a){return this.useJsScroll&&this.isEnabled()&&"none"!=this.el.style.display&&0<d(a).closest(this.afEl).size()},handleEvent:function(a){if(!this.scrollingLocked)switch(a.type){case "touchstart":clearInterval(this.scrollTopInterval);
this.preventHideRefresh=!this.refreshRunning;this.moved=!1;this.onTouchStart(a);this.bubbles||a.stopPropagation();break;case "touchmove":this.onTouchMove(a);this.bubbles||a.stopPropagation();break;case "touchend":this.onTouchEnd(a);this.bubbles||a.stopPropagation();break;case "scroll":this.onScroll(a)}},coreAddPullToRefresh:function(a){a&&(this.refreshElement=a);null===this.refreshElement?(a=document.getElementById(this.container.id+"_pulldown"),a=null!==a?af(a):af("<div id='"+this.container.id+"_pulldown' class='afscroll_refresh' style='border-radius:.6em;border: 1px solid #2A2A2A;background-image: -webkit-gradient(linear,left top,left bottom,color-stop(0,#666666),color-stop(1,#222222));background:#222222;margin:0px;height:60px;position:relative;text-align:center;line-height:60px;color:white;width:100%;'>"+
this.refreshContent+"</div>")):a=af(this.refreshElement);a=a.get();this.refreshContainer=af('<div style="overflow:hidden;width:100%;height:0;margin:0;padding:0;padding-left:5px;padding-right:5px;display:none;"></div>');d(this.el).prepend(this.refreshContainer.append(a,"top"));this.refreshContainer=this.refreshContainer[0]},fireRefreshRelease:function(a,b){if(this.refresh&&a){var c=!1!==d.trigger(this,"refresh-release",[a]);this.preventHideRefresh=!1;this.refreshRunning=!0;if(c){var e=this;0<this.refreshHangTimeout&&
(this.refreshCancelCB=setTimeout(function(){e.hideRefresh()},this.refreshHangTimeout))}}},setRefreshContent:function(a){af(this.container).find(".afscroll_refresh").html(a)},lock:function(){this.scrollingLocked||(this.scrollingLocked=!0,(this.rememberEventsActive=this.eventsActive)||this.initEvents())},unlock:function(){this.scrollingLocked&&(this.scrollingLocked=!1,this.rememberEventsActive||this.removeEvents())},scrollToItem:function(a,b){d.is$(a)||(a=d(a));var c,e;"bottom"==b?(c=a.offset(),c=c.top-
this.afEl.offset().bottom+c.height,c+=4):(c=a.offset().top,c-=document.body.scrollTop,e=this.afEl.offset().top,document.body.scrollTop<e&&(c-=e),c-=4);this.scrollBy({y:c,x:0},0)},setPaddings:function(a,b){var c=d(this.el),e=numOnly(c.css("paddingTop"));c.css("paddingTop",a+"px").css("paddingBottom",b+"px");this.scrollBy({y:a-e,x:0})},divide:function(a,b){return 0!==b?a/b:0},isEnabled:function(){return this.eventsActive},addInfinite:function(){this.infinite=!0},clearInfinite:function(){this.infiniteTriggered=
!1;this.scrollSkip=!0}};e=function(a,b){this.init(a,b);this.container=this.el.parentNode;this.container.afScrollerId=a.afScrollerId;this.afEl=d(this.container);"hidden"!=this.container.style.overflow&&(this.container.style.overflow="hidden");this.addPullToRefresh(null,!0);this.autoEnable&&this.enable(!0);var c;this.verticalScroll&&(!0===this.verticalScroll&&!0===this.scrollBars)&&(c=k(5,20),c.style.top="0px",this.vScrollCSS&&(c.className=this.vScrollCSS),c.style.display="none",this.container.appendChild(c),
this.vscrollBar=c);this.horizontalScroll&&(!0===this.horizontalScroll&&!0===this.scrollBars)&&(c=k(20,5),c.style.bottom="0px",this.hScrollCSS&&(c.className=this.hScrollCSS),c.style.display="none",this.container.appendChild(c),this.hscrollBar=c);this.horizontalScroll&&(this.el.style["float"]="left");this.el.hasScroller=!0};f=function(a,b){b.nativeParent&&(a=a.parentNode);this.init(a,b);var c=d(a);if(!0!==b.noParent){var e=c.parent();c.css("height",e.height()).css("width",e.width());c.insertBefore(c.parent());
e.remove()}this.container=this.el;c.css("-webkit-overflow-scrolling","touch");b.autoEnable&&this.enable()};f.prototype=new m;e.prototype=new m;f.prototype.defaultProperties=function(){this.refreshContainer=null;this.dX=this.cX=this.dY=this.cY=0;this.cancelPropagation=!1;this.loggedPcentX=this.loggedPcentY=0;var a=this;this.adjustScrollOverflowProxy_=function(){a.afEl.css("overflow","auto");a.afEl.parent().css("overflow","hidden")}};f.prototype.enable=function(a){this.eventsActive||(this.eventsActive=
!0,this.el.style.overflow="auto",this.el.parentNode.style.overflow="hidden",a||this.adjustScroll(),this.el.addEventListener("touchstart",this,!1),this.el.addEventListener("scroll",this,!1))};f.prototype.disable=function(a){this.eventsActive&&(this.logPos(this.el.scrollLeft,this.el.scrollTop),a||(this.el.style.overflow="hidden"),this.el.removeEventListener("touchstart",this,!1),this.el.removeEventListener("touchmove",this,!1),this.el.removeEventListener("touchend",this,!1),this.el.removeEventListener("scroll",
this,!1),this.eventsActive=!1)};f.prototype.addPullToRefresh=function(a,b){this.el.removeEventListener("touchstart",this,!1);this.el.addEventListener("touchstart",this,!1);b||(this.refresh=!0);this.refresh&&!0===this.refresh&&(this.coreAddPullToRefresh(a),this.refreshContainer.style.position="absolute",this.refreshContainer.style.top="-60px",this.refreshContainer.style.height="60px",this.refreshContainer.style.display="block")};f.prototype.onTouchStart=function(a){0===this.el.scrollTop&&(this.el.scrollTop=
1);this.el.scrollTop===this.el.scrollHeight-this.el.clientHeight&&(this.el.scrollTop-=1);this.horizontalScroll&&(0===this.el.scrollLeft&&(this.el.scrollLeft=1),this.el.scrollLeft===this.el.scrollWidth-this.el.clientWidth&&(this.el.scrollLeft-=1));this.refreshCancelCB&&clearTimeout(this.refreshCancelCB);this.el.addEventListener("touchmove",this,!1);this.dY=a.touches[0].pageY;(this.refresh||this.infinite)&&this.refresh&&0>this.dY&&this.showRefresh()};f.prototype.onTouchMove=function(a){var b=a.touches[0].pageY-
this.dY,c=a.touches[0].pageX-this.dX;this.hasVertScroll&&this.el.clientHeight==this.el.scrollHeight&&a.preventDefault();this.hasHorScroll&&this.el.clientWidth==this.el.scrollWidth&&a.preventDefault();this.moved||(d.trigger(this,"scrollstart",[this.el]),d.trigger(d.touchLayer,"scrollstart",[this.el]),this.el.addEventListener("touchend",this,!1),this.moved=!0);this.refresh&&0>this.el.scrollTop?this.showRefresh():this.refreshTriggered&&(this.refresh&&this.el.scrollTop>this.refreshHeight)&&(this.refreshTriggered=
!1,this.refreshCancelCB&&clearTimeout(this.refreshCancelCB),this.hideRefresh(!1),d.trigger(this,"refresh-cancel"));this.cY=b;this.cX=c};f.prototype.showRefresh=function(){this.refreshTriggered||(this.refreshTriggered=!0,d.trigger(this,"refresh-trigger"))};f.prototype.onTouchEnd=function(a){a=this.el.scrollTop<=-this.refreshHeight;this.fireRefreshRelease(a,!0);a&&this.refresh&&(this.refreshContainer.style.position="relative",this.refreshContainer.style.top="0px");this.dY=this.cY=0;this.el.removeEventListener("touchmove",
this,!1);this.el.removeEventListener("touchend",this,!1);this.infiniteEndCheck=!0;this.infinite&&(!this.infiniteTriggered&&Math.abs(this.el.scrollTop)>=this.el.scrollHeight-this.el.clientHeight)&&(this.infiniteTriggered=!0,d.trigger(this,"infinite-scroll"),this.infiniteEndCheck=!0);this.touchEndFired=!0;var b=this,c=this.el.scrollTop,e=this.el.scrollLeft,f=0;b.nativePolling=setInterval(function(){f++;if(200<=f)clearInterval(b.nativePolling);else if(b.el.scrollTop!=c||b.el.scrollLeft!=e)clearInterval(b.nativePolling),
d.trigger(d.touchLayer,"scrollend",[b.el]),d.trigger(b,"scrollend",[b.el])},20)};f.prototype.hideRefresh=function(a){if(!this.preventHideRefresh){var b=this,c=function(a){a||(b.el.style[d.feat.cssPrefix+"Transform"]="none",b.el.style[d.feat.cssPrefix+"TransitionProperty"]="none",b.el.scrollTop=0,b.logPos(b.el.scrollLeft,0));b.refreshContainer.style.top="-60px";b.refreshContainer.style.position="absolute";b.dY=b.cY=0;d.trigger(b,"refresh-finish")};!1!==a&&b.afEl.css3Animate?b.afEl.css3Animate({y:b.el.scrollTop-
b.refreshHeight+"px",x:"0%",time:"75ms",complete:c}):c();this.refreshTriggered=!1}};f.prototype.hideScrollbars=function(){};f.prototype.scrollTo=function(a,b){this.logPos(a.x,a.y);a.x*=-1;a.y*=-1;return this._scrollTo(a,b)};f.prototype.scrollBy=function(a,b){a.x+=this.el.scrollLeft;a.y+=this.el.scrollTop;this.logPos(this.el.scrollLeft,this.el.scrollTop);return this._scrollTo(a,b)};f.prototype.scrollToBottom=function(a){this._scrollToBottom(a);this.logPos(this.el.scrollLeft,this.el.scrollTop)};f.prototype.onScroll=
function(a){this.infinite&&this.touchEndFired?this.touchEndFired=!1:this.scrollSkip?this.scrollSkip=!1:(this.infinite&&(!this.infiniteTriggered&&Math.abs(this.el.scrollTop)>=this.el.scrollHeight-this.el.clientHeight)&&(this.infiniteTriggered=!0,d.trigger(this,"infinite-scroll"),this.infiniteEndCheck=!0),this.infinite&&(this.infiniteEndCheck&&this.infiniteTriggered)&&(this.infiniteEndCheck=!1,d.trigger(this,"infinite-scroll-end")))};f.prototype.logPos=function(a,b){this.loggedPcentX=this.divide(a,
this.el.scrollWidth);this.loggedPcentY=this.divide(b,this.el.scrollHeight);this.scrollLeft=a;this.scrollTop=b;isNaN(this.loggedPcentX)&&(this.loggedPcentX=0);isNaN(this.loggedPcentY)&&(this.loggedPcentY=0)};f.prototype.adjustScroll=function(){this.adjustScrollOverflowProxy_();this.el.scrollLeft=this.loggedPcentX*this.el.scrollWidth;this.el.scrollTop=this.loggedPcentY*this.el.scrollHeight;this.logPos(this.el.scrollLeft,this.el.scrollTop)};e.prototype.defaultProperties=function(){this.boolScrollLock=
!1;this.elementInfo=this.currentScrollingObject=null;this.verticalScroll=!0;this.horizontalScroll=!1;this.scrollBars=!0;this.hscrollBar=this.vscrollBar=null;this.vScrollCSS=this.hScrollCSS="scrollBar";this.firstEventInfo=null;this.moved=!1;this.preventPullToRefresh=!0;this.refreshSafeKeep=this.androidFormsMode=this.isScrolling=!1;this.lastScrollbar="";this.scrollingFinishCB=this.container=this.finishScrollingObject=null;this.loggedPcentX=this.loggedPcentY=0};e.prototype.enable=function(a){this.eventsActive||
(this.eventsActive=!0,a?this.scrollerMoveCSS({x:0,y:0},0):this.adjustScroll(),this.container.addEventListener("touchstart",this,!1),this.container.addEventListener("touchmove",this,!1),this.container.addEventListener("touchend",this,!1))};e.prototype.adjustScroll=function(){var a=this.getViewportSize();this.scrollerMoveCSS({x:Math.round(this.loggedPcentX*(this.el.clientWidth-a.w)),y:Math.round(this.loggedPcentY*(this.el.clientHeight-a.h))},0)};e.prototype.disable=function(){if(this.eventsActive){var a=
this.getCSSMatrix(this.el);this.logPos(numOnly(a.e)-numOnly(this.container.scrollLeft),numOnly(a.f)-numOnly(this.container.scrollTop));this.container.removeEventListener("touchstart",this,!1);this.container.removeEventListener("touchmove",this,!1);this.container.removeEventListener("touchend",this,!1);this.eventsActive=!1}};e.prototype.addPullToRefresh=function(a,b){b||(this.refresh=!0);this.refresh&&!0===this.refresh&&(this.coreAddPullToRefresh(a),this.el.style.overflow="visible")};e.prototype.hideScrollbars=
function(){this.hscrollBar&&(this.hscrollBar.style.display="none",this.hscrollBar.style[d.feat.cssPrefix+"TransitionDuration"]="0ms");this.vscrollBar&&(this.vscrollBar.style.display="none",this.vscrollBar.style[d.feat.cssPrefix+"TransitionDuration"]="0ms")};e.prototype.getViewportSize=function(){var a=window.getComputedStyle(this.container);isNaN(numOnly(a.paddingTop))&&alert(typeof a.paddingTop+"::"+a.paddingTop+":");return{h:this.container.clientHeight>window.innerHeight?window.innerHeight:this.container.clientHeight-
numOnly(a.paddingTop)-numOnly(a.paddingBottom),w:this.container.clientWidth>window.innerWidth?window.innerWidth:this.container.clientWidth-numOnly(a.paddingLeft)-numOnly(a.paddingRight)}};e.prototype.onTouchStart=function(a){this.moved=!1;this.currentScrollingObject=null;if(this.container&&(this.refreshCancelCB&&(clearTimeout(this.refreshCancelCB),this.refreshCancelCB=null),this.scrollingFinishCB&&(clearTimeout(this.scrollingFinishCB),this.scrollingFinishCB=null),1==a.touches.length&&!this.boolScrollLock)){if(a.touches[0].target&&
void 0!==a.touches[0].target.type){var b=a.touches[0].target.tagName.toLowerCase();a.touches[0].target.type.toLowerCase();if("select"==b)return}b={top:0,left:0,speedY:0,speedX:0,absSpeedY:0,absSpeedX:0,deltaY:0,deltaX:0,absDeltaY:0,absDeltaX:0,y:0,x:0,duration:0};this.elementInfo={};var c=this.getViewportSize();this.elementInfo.bottomMargin=c.h;this.elementInfo.maxTop=this.el.clientHeight-this.elementInfo.bottomMargin;0>this.elementInfo.maxTop&&(this.elementInfo.maxTop=0);this.elementInfo.divHeight=
this.el.clientHeight;this.elementInfo.rightMargin=c.w;this.elementInfo.maxLeft=this.el.clientWidth-this.elementInfo.rightMargin;0>this.elementInfo.maxLeft&&(this.elementInfo.maxLeft=0);this.elementInfo.divWidth=this.el.clientWidth;this.elementInfo.hasVertScroll=this.verticalScroll||0<this.elementInfo.maxTop;this.elementInfo.hasHorScroll=0<this.elementInfo.maxLeft;this.elementInfo.requiresVScrollBar=this.vscrollBar&&this.elementInfo.hasVertScroll;this.elementInfo.requiresHScrollBar=this.hscrollBar&&
this.elementInfo.hasHorScroll;this.saveEventInfo(a);this.saveFirstEventInfo(a);a=this.getCSSMatrix(this.el);b.top=numOnly(a.f)-numOnly(this.container.scrollTop);b.left=numOnly(a.e)-numOnly(this.container.scrollLeft);this.container.scrollTop=this.container.scrollLeft=0;this.currentScrollingObject=this.el;this.refresh&&0===b.top?(this.refreshContainer.style.display="block",this.refreshHeight=this.refreshContainer.firstChild.clientHeight,this.refreshContainer.firstChild.style.top=-this.refreshHeight+
"px",this.refreshContainer.style.overflow="visible",this.preventPullToRefresh=!1):0>b.top&&(this.preventPullToRefresh=!0,this.refresh&&(this.refreshContainer.style.overflow="hidden"));b.x=b.left;b.y=b.top;this.setVScrollBar(b,0,0)&&(this.vscrollBar.style.right="0px",this.vscrollBar.style[d.feat.cssPrefix+"Transition"]="");this.setHScrollBar(b,0,0)&&(this.container.clientHeight>window.innerHeight?this.hscrollBar.style.top=window.innerHeight-numOnly(this.hscrollBar.style.height)+"px":this.hscrollBar.style.bottom=
numOnly(this.hscrollBar.style.height),this.hscrollBar.style[d.feat.cssPrefix+"Transition"]="");this.lastScrollInfo=b;this.hasMoved=!1;this.scrollerMoveCSS(this.lastScrollInfo,0)}};e.prototype.getCSSMatrix=function(a){if(this.androidFormsMode){var b=parseInt(a.style.marginTop,10);a=parseInt(a.style.marginLeft,10);isNaN(b)&&(b=0);isNaN(a)&&(a=0);return{f:b,e:a}}return d.getCssMatrix(a)};e.prototype.saveEventInfo=function(a){this.lastEventInfo={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY,time:a.timeStamp}};
e.prototype.saveFirstEventInfo=function(a){this.firstEventInfo={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY,time:a.timeStamp}};e.prototype.setVScrollBar=function(a,b,c){if(!this.elementInfo.requiresVScrollBar)return!1;var d=parseFloat(this.elementInfo.bottomMargin/this.elementInfo.divHeight)*this.elementInfo.bottomMargin+"px";numOnly(d)>this.elementInfo.bottomMargin&&(d=this.elementInfo.bottomMargin+"px");d!=this.vscrollBar.style.height&&(this.vscrollBar.style.height=d);a=this.elementInfo.bottomMargin-
numOnly(this.vscrollBar.style.height)-(this.elementInfo.maxTop+a.y)/this.elementInfo.maxTop*(this.elementInfo.bottomMargin-numOnly(this.vscrollBar.style.height));a>this.elementInfo.bottomMargin&&(a=this.elementInfo.bottomMargin);0>a&&(a=0);this.scrollbarMoveCSS(this.vscrollBar,{x:0,y:a},b,c);return!0};e.prototype.setHScrollBar=function(a,b,c){if(!this.elementInfo.requiresHScrollBar)return!1;var d=parseFloat(this.elementInfo.rightMargin/this.elementInfo.divWidth)*this.elementInfo.rightMargin+"px";
d!=this.hscrollBar.style.width&&(this.hscrollBar.style.width=d);a=this.elementInfo.rightMargin-numOnly(this.hscrollBar.style.width)-(this.elementInfo.maxLeft+a.x)/this.elementInfo.maxLeft*(this.elementInfo.rightMargin-numOnly(this.hscrollBar.style.width));a>this.elementInfo.rightMargin&&(a=this.elementInfo.rightMargin);0>a&&(a=0);this.scrollbarMoveCSS(this.hscrollBar,{x:a,y:0},b,c);return!0};e.prototype.onTouchMove=function(a){if(null!==this.currentScrollingObject){var b=this.calculateMovement(a);
this.calculateTarget(b);this.lastScrollInfo=b;this.moved||(d.trigger(this,"scrollstart"),d.trigger(d.touchLayer,"scrollstart",[this.el]),this.elementInfo.requiresVScrollBar&&(this.vscrollBar.style.display="block"),this.elementInfo.requiresHScrollBar&&(this.hscrollBar.style.display="block"));this.moved=!0;this.refresh&&0===b.top?(this.refreshContainer.style.display="block",this.refreshHeight=this.refreshContainer.firstChild.clientHeight,this.refreshContainer.firstChild.style.top=-this.refreshHeight+
"px",this.refreshContainer.style.overflow="visible",this.preventPullToRefresh=!1):0>b.top&&(this.preventPullToRefresh=!0,this.refresh&&(this.refreshContainer.style.overflow="hidden"));this.saveEventInfo(a);if(!1===this.isScrolling&&(this.isScrolling=!0,this.onScrollStart))this.onScrollStart();a=this.getCSSMatrix(this.el);this.lastScrollInfo.top=numOnly(a.f);this.lastScrollInfo.left=numOnly(a.e);this.recalculateDeltaY(this.lastScrollInfo);this.recalculateDeltaX(this.lastScrollInfo);this.checkYboundary(this.lastScrollInfo);
this.elementInfo.hasHorScroll&&this.checkXboundary(this.lastScrollInfo);a=0<this.lastScrollInfo.y&&0<this.lastScrollInfo.deltaY;var c=this.lastScrollInfo.y<-this.elementInfo.maxTop&&0>this.lastScrollInfo.deltaY;if(a||c){b=a?this.lastScrollInfo.y:-this.lastScrollInfo.y-this.elementInfo.maxTop;b=(this.container.clientHeight-b)/this.container.clientHeight;0.5>b&&(b=0.5);var e=0;a&&0<this.lastScrollInfo.top||c&&this.lastScrollInfo.top<-this.elementInfo.maxTop?e=this.lastScrollInfo.top:c&&(e=-this.elementInfo.maxTop);
c=this.lastScrollInfo.deltaY*b;1>Math.abs(this.lastScrollInfo.deltaY*b)&&(c=a?1:-1);this.lastScrollInfo.y=e+c}this.elementInfo.hasHorScroll&&(a=0<this.lastScrollInfo.x&&0<this.lastScrollInfo.deltaX,c=this.lastScrollInfo.x<-this.elementInfo.maxLeft&&0>this.lastScrollInfo.deltaX,a||c)&&(b=a?this.lastScrollInfo.x:-this.lastScrollInfo.x-this.elementInfo.maxLeft,b=(this.container.clientWidth-b)/this.container.clientWidth,0.5>b&&(b=0.5),e=0,a&&0<this.lastScrollInfo.left||c&&this.lastScrollInfo.left<-this.elementInfo.maxLeft?
e=this.lastScrollInfo.left:c&&(e=-this.elementInfo.maxLeft),c=this.lastScrollInfo.deltaX*b,1>Math.abs(this.lastScrollInfo.deltaX*b)&&(c=a?1:-1),this.lastScrollInfo.x=e+c);this.lockBounce&&(0<this.lastScrollInfo.x?this.lastScrollInfo.x=0:-1*this.lastScrollInfo.x>this.elementInfo.maxLeft&&(this.lastScrollInfo.x=-1*this.elementInfo.maxLeft),0<this.lastScrollInfo.y?this.lastScrollInfo.y=0:-1*this.lastScrollInfo.y>this.elementInfo.maxTop&&(this.lastScrollInfo.y=-1*this.elementInfo.maxTop));this.scrollerMoveCSS(this.lastScrollInfo,
0);this.setVScrollBar(this.lastScrollInfo,0,0);this.setHScrollBar(this.lastScrollInfo,0,0);this.refresh&&!this.preventPullToRefresh&&(!this.refreshTriggered&&this.lastScrollInfo.top>this.refreshHeight?(this.refreshTriggered=!0,d.trigger(this,"refresh-trigger")):this.refreshTriggered&&this.lastScrollInfo.top<this.refreshHeight&&(this.refreshTriggered=!1,d.trigger(this,"refresh-cancel")));this.infinite&&!this.infiniteTriggered&&Math.abs(this.lastScrollInfo.top)>=this.el.clientHeight-this.container.clientHeight&&
(this.infiniteTriggered=!0,d.trigger(this,"infinite-scroll"))}};e.prototype.calculateMovement=function(a,b){var c={top:0,left:0,speedY:0,speedX:0,absSpeedY:0,absSpeedX:0,deltaY:0,deltaX:0,absDeltaY:0,absDeltaX:0,y:0,x:0,duration:0},d=b?this.firstEventInfo:this.lastEventInfo,e=b?a.pageX:a.touches[0].pageX,f=b?a.pageY:a.touches[0].pageY,g=b?a.time:a.timeStamp;c.deltaY=this.elementInfo.hasVertScroll?f-d.pageY:0;c.deltaX=this.elementInfo.hasHorScroll?e-d.pageX:0;c.time=g;c.duration=g-d.time;return c};
e.prototype.calculateTarget=function(a){a.y=this.lastScrollInfo.y+a.deltaY;a.x=this.lastScrollInfo.x+a.deltaX};e.prototype.checkYboundary=function(a){var b=this.container.clientHeight/2,c=this.elementInfo.maxTop+b;if(a.y>b)a.y=b;else if(-a.y>c)a.y=-c;else return;this.recalculateDeltaY(a)};e.prototype.checkXboundary=function(a){var b=this.container.clientWidth/2,c=this.elementInfo.maxLeft+b;if(a.x>b)a.x=b;else if(-a.x>c)a.x=-c;else return;this.recalculateDeltaX(a)};e.prototype.recalculateDeltaY=function(a){var b=
Math.abs(a.deltaY);a.deltaY=a.y-a.top;newAbsDeltaY=Math.abs(a.deltaY);a.duration=a.duration*newAbsDeltaY/b};e.prototype.recalculateDeltaX=function(a){var b=Math.abs(a.deltaX);a.deltaX=a.x-a.left;newAbsDeltaX=Math.abs(a.deltaX);a.duration=a.duration*newAbsDeltaX/b};e.prototype.hideRefresh=function(a){var b=this;this.preventHideRefresh||(this.scrollerMoveCSS({x:0,y:0,complete:function(){d.trigger(b,"refresh-finish")}},75),this.refreshTriggered=!1)};e.prototype.setMomentum=function(a){a.speedY=this.divide(a.deltaY,
a.duration);a.speedX=this.divide(a.deltaX,a.duration);a.absSpeedY=Math.abs(a.speedY);a.absSpeedX=Math.abs(a.speedX);a.absDeltaY=Math.abs(a.deltaY);a.absDeltaX=Math.abs(a.deltaX);if(0<a.absDeltaY){if(a.deltaY=(0>a.deltaY?-1:1)*a.absSpeedY*a.absSpeedY/0.0024,a.absDeltaY=Math.abs(a.deltaY),a.duration=a.absSpeedY/0.0012,a.speedY=a.deltaY/a.duration,a.absSpeedY=Math.abs(a.speedY),0.12>a.absSpeedY||5>a.absDeltaY)a.deltaY=a.absDeltaY=a.duration=a.speedY=a.absSpeedY=0}else if(a.absDeltaX){if(a.deltaX=(0>
a.deltaX?-1:1)*a.absSpeedX*a.absSpeedX/0.0024,a.absDeltaX=Math.abs(a.deltaX),a.duration=a.absSpeedX/0.0012,a.speedX=a.deltaX/a.duration,a.absSpeedX=Math.abs(a.speedX),0.12>a.absSpeedX||5>a.absDeltaX)a.deltaX=a.absDeltaX=a.duration=a.speedX=a.absSpeedX=0}else a.duration=0};e.prototype.onTouchEnd=function(a){if(null!==this.currentScrollingObject&&this.moved){this.finishScrollingObject=this.currentScrollingObject;this.currentScrollingObject=null;a=this.calculateMovement(this.lastEventInfo,!0);this.androidFormsMode||
this.setMomentum(a);this.calculateTarget(a);var b=this.getCSSMatrix(this.el);a.top=numOnly(b.f);a.left=numOnly(b.e);this.checkYboundary(a);this.elementInfo.hasHorScroll&&this.checkXboundary(a);b=!this.preventPullToRefresh&&(a.top>this.refreshHeight||a.y>this.refreshHeight);this.fireRefreshRelease(b,0<a.top);if(this.refresh&&b)a.y=this.refreshHeight,a.duration=75;else if(0<=a.y)a.y=0,0<=a.top&&(a.duration=75);else if(-a.y>this.elementInfo.maxTop||0===this.elementInfo.maxTop)a.y=-this.elementInfo.maxTop,
-a.top>this.elementInfo.maxTop&&(a.duration=75);if(this.elementInfo.hasHorScroll)if(0<=a.x)a.x=0,0<=a.left&&(a.duration=75);else if(-a.x>this.elementInfo.maxLeft||0===this.elementInfo.maxLeft)a.x=-this.elementInfo.maxLeft,-a.left>this.elementInfo.maxLeft&&(a.duration=75);this.androidFormsMode&&(a.duration=0);this.scrollerMoveCSS(a,a.duration,"cubic-bezier(0.33,0.66,0.66,1)");this.setVScrollBar(a,a.duration,"cubic-bezier(0.33,0.66,0.66,1)");this.setHScrollBar(a,a.duration,"cubic-bezier(0.33,0.66,0.66,1)");
this.setFinishCalback(a.duration);this.infinite&&!this.infiniteTriggered&&Math.abs(a.y)>=this.el.clientHeight-this.container.clientHeight&&(this.infiniteTriggered=!0,d.trigger(this,"infinite-scroll"))}};e.prototype.setFinishCalback=function(a){var b=this;this.scrollingFinishCB=setTimeout(function(){b.hideScrollbars();d.trigger(d.touchLayer,"scrollend",[b.el]);d.trigger(b,"scrollend",[b.el]);b.isScrolling=!1;b.elementInfo=null;b.infinite&&d.trigger(b,"infinite-scroll-end")},a)};e.prototype.startFormsMode=
function(){if(!this.blockFormsFix){var a=this.getCSSMatrix(this.el);this.refreshSafeKeep=this.refresh;this.refresh=!1;this.androidFormsMode=!0;this.el.style[d.feat.cssPrefix+"Transform"]="none";this.el.style[d.feat.cssPrefix+"Transition"]="none";this.el.style[d.feat.cssPrefix+"Perspective"]="none";this.scrollerMoveCSS({x:numOnly(a.e),y:numOnly(a.f)},0);this.container.style[d.feat.cssPrefix+"Perspective"]="none";this.container.style[d.feat.cssPrefix+"BackfaceVisibility"]="visible";this.vscrollBar&&
(this.vscrollBar.style[d.feat.cssPrefix+"Transform"]="none",this.vscrollBar.style[d.feat.cssPrefix+"Transition"]="none",this.vscrollBar.style[d.feat.cssPrefix+"Perspective"]="none",this.vscrollBar.style[d.feat.cssPrefix+"BackfaceVisibility"]="visible");this.hscrollBar&&(this.hscrollBar.style[d.feat.cssPrefix+"Transform"]="none",this.hscrollBar.style[d.feat.cssPrefix+"Transition"]="none",this.hscrollBar.style[d.feat.cssPrefix+"Perspective"]="none",this.hscrollBar.style[d.feat.cssPrefix+"BackfaceVisibility"]=
"visible")}};e.prototype.stopFormsMode=function(){if(!this.blockFormsFix){var a=this.getCSSMatrix(this.el);this.refresh=this.refreshSafeKeep;this.androidFormsMode=!1;this.el.style[d.feat.cssPrefix+"Perspective"]=1E3;this.el.style.marginTop=0;this.el.style.marginLeft=0;this.el.style[d.feat.cssPrefix+"Transition"]="0ms linear";this.scrollerMoveCSS({x:numOnly(a.e),y:numOnly(a.f)},0);this.container.style[d.feat.cssPrefix+"Perspective"]=1E3;this.container.style[d.feat.cssPrefix+"BackfaceVisibility"]="hidden";
this.vscrollBar&&(this.vscrollBar.style[d.feat.cssPrefix+"Perspective"]=1E3,this.vscrollBar.style[d.feat.cssPrefix+"BackfaceVisibility"]="hidden");this.hscrollBar&&(this.hscrollBar.style[d.feat.cssPrefix+"Perspective"]=1E3,this.hscrollBar.style[d.feat.cssPrefix+"BackfaceVisibility"]="hidden")}};e.prototype.scrollerMoveCSS=function(a,b,c){b||(b=0);c||(c="linear");b=numOnly(b);this.el&&this.el.style&&(this.eventsActive&&(this.androidFormsMode?(this.el.style.marginTop=Math.round(a.y)+"px",this.el.style.marginLeft=
Math.round(a.x)+"px"):(this.el.style[d.feat.cssPrefix+"Transform"]="translate"+g+a.x+"px,"+a.y+"px"+h,this.el.style[d.feat.cssPrefix+"TransitionDuration"]=b+"ms",this.el.style[d.feat.cssPrefix+"TransitionTimingFunction"]=c)),this.logPos(a.x,a.y))};e.prototype.logPos=function(a,b){var c;c=this.elementInfo?{h:this.elementInfo.bottomMargin,w:this.elementInfo.rightMargin}:this.getViewportSize();this.loggedPcentX=this.divide(a,this.el.clientWidth-c.w);this.loggedPcentY=this.divide(b,this.el.clientHeight-
c.h);this.scrollTop=b;this.scrollLeft=a};e.prototype.scrollbarMoveCSS=function(a,b,c,e){c||(c=0);e||(e="linear");a&&a.style&&(this.androidFormsMode?(a.style.marginTop=Math.round(b.y)+"px",a.style.marginLeft=Math.round(b.x)+"px"):(a.style[d.feat.cssPrefix+"Transform"]="translate"+g+b.x+"px,"+b.y+"px"+h,a.style[d.feat.cssPrefix+"TransitionDuration"]=c+"ms",a.style[d.feat.cssPrefix+"TransitionTimingFunction"]=e))};e.prototype.scrollTo=function(a,b){b||(b=0);this.scrollerMoveCSS(a,b)};e.prototype.scrollBy=
function(a,b){var c=this.getCSSMatrix(this.el),d=numOnly(c.f),c=numOnly(c.e);this.scrollTo({y:d-a.y,x:c-a.x},b)};e.prototype.scrollToBottom=function(a){this.scrollTo({y:-1*(this.el.clientHeight-this.container.clientHeight),x:0},a)};e.prototype.scrollToTop=function(a){this.scrollTo({x:0,y:0},a)};return function(a,b){var c;!n&&d.touchLayer&&d.isObject(d.touchLayer)?p():d.touchLayer&&d.isObject(d.touchLayer)||(d.touchLayer={});if(c="string"==typeof a||a instanceof String?document.getElementById(a):a)return af.os.desktop?
new m(c,b):b.useJsScroll?new e(c,b):new f(c,b);alert("Could not find element for scroller "+a)}}()})(af);
